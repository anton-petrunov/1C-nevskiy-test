# Тестовое задание для ООО "Невский"
## Краткое описание
Была выполнена доработка обработки в соответствии с техническим заданием
## Техническое задание
Во вложении тестовая обработка, которую необходимо доработать следующим функционалом:
1. Сформировать дерево (команда `"Заполнить дерево"`), заполнив его колонками `"Значение числа"` - генератор случайных чисел (от 1 до 100), колонка `Значение Даты` - к `ДатыВыполнения + ЗначениеЧисла`. Всего должно быть `100` записей;
2. Результат в дереве сгруппировать согласно полю `ГруппировкаДерева`;
3. Сортировка дерева - сортировать дерево согласно Группировки результата (`ГруппировкаДерева`);
4. "Ваше творчество" - чтобы Вы еще добавили к этой обработке (к поставленной задаче). Это не обязательно.
Время выполнения неограниченно. Методы, способы выполнения задачи не регламентированы (Тех.платформа `8.3.18`, БСП `2.16`). Если сделаете различные варианты формирования дерева - будет даже очень хорошо!
## Используемые технологии
Платформа  `1С: Предприятие 8.3, учебная версия (8.3.22.1851)` в режиме совместимости с версией `8.3.18`
`1С: EDT` (*только* для публикации проекта на GitHub)
## Запуск проекта *(оформляется)*
 Скачайте файл `"Тестовое Задание Антона Петрунова 1.0.0.21.zip"` отсюда.
Т.к. в `GitHub` ограничены типы файлов, встраимаемых в `README.md`, то необходимо распаковать скачанный ранее архив. В нем находится файл с обработкой `"Тестовое задание Антона Петрунова.epf`

............
## Что было реализовано
1. В соответствии с п. 1 ТЗ по нажатию кнопки `Заполнить Дерево` было выполнено формирование и заполнение дерева с колонками `ЗначениеЧисла` и `ЗначениеДаты` числами и датами соответственно
2. В соответствии с п. 2 ТЗ: 
* Была выполнена автоматическая группировка дерева в соответствии с положением тумблера, который связан с реквизитом формы `ГруппировкаДерева`
* При этом группировка дерева происходит автоматически при изменении значения этого реквизита (это реализовано как событие `ПриИзменении` элемента формы `ГруппировкаДерева`
* Что важно при перегруппировке дерева в результате переключения тумблера `Группировка Дерева`, - __порядок следования__ элементов исходного дерева __сохраняется__
* Для исключения лишнего вызова сервера при пустом дереве, была добавлена проверка на заполненность элемента формы этого дерева на клиенте с выводом соответствующего информационного сообщения
3. В соответствии с п. 3 ТЗ: 
* При нажатии кнопки `Сортировать Дерево` происходит сортирока дерева по возрастанию по той колонке, по которой уже выполнена группировка.
* При этом, чтобы сортировка по числовым значениям выполнялась корректно, был изменен тип колонки `ЗначениеЧисла` с типа `Строка` на тип `Число`. Без этого изменения сортировка осуществлялась по возрастанию индексов порядка положения символов в таблице кодировки, что для числовых данных работало некорректно
* Также как и с элементом формы `ГруппировкаДерева` для исключения серверного вызова при пустом дереве на форме, была реализована проверка на пустоту формы дерева на клиенте. И также выводится информационное сообщение
5. "Моё творчество" и пункт без номера
* Изначально я реализовал и группировку дерева, и его сортировку менее эффективым способом, чем сейчас. В нем формирование группировки было осуществлено с помощью промежуточного `Соответствия массивов`, принимающего на вход значения и выполняющего группировку в зависимости от `ГруппировкаДерева`
* Я хотел убрать этот кусок функционала и кода из программы, но потом прочитал пункт задания без номера, и решил оставить его, т.к. он точно соответствует этому пожеланию
* В итоге я вставил на форму подменю `Сгруппировать дерево`, где разместил две команды: `Сгруппировать дерево` и `Сгруппировать дерево, используя соответствие`
* Также я изменил внешний вид элемента формы, связанного с реквизитом формы `ГруппировкаДерева` с типа `ПолеВвода` на тип `ПолеПереключателя (Тумблер)`. Это повысило наглядность формы и удобство её использования.
* Помимо этого я поместил на форму подменю "Очистить дерево". В его состав я включил команды: `Очистить дерево (все данные на сервере)` и `Очистить дерево (только форму на клиенте)`.
	* Разница в этих командах в том, что очистка формы на клиенте происходит без вызова сервера, и поэтому значительно быстрее, чем при вызове сервера, преобразовании данных формы в объект `ДеревоЗначений`, очистке дерева и обратому преобразованию пустого дерева. 
	- `Замер производительности` показал относителные средние значения очистки на клиенте и на сервере для 100 строк дерева: `~ 0,4 мс` на клиенте против `~ 23 мс` на сервере
	- Конечно, при такой быстрой очистке данные остаются на сервере, и при перезагрузке формы вернутся на место. Но в нашем конкретном случае данные нигде не хранятся на сервере, поэтому этот способ вполне решает задачу очистки
	- Для защиты данных пользователя в поведение формы при очистке были встроены `Асинхронные диалоговые окна` с вопросами о подтверждении очистки. Они реализованы через `ПоказатьВопрос`.
	- И снова для информирования пользователя, что дерево пустое (в случае, если дерево на форме пустое) на клиенте была добавлена проверка на пустоту дерева с выводом информационного сообщения соответствующего содержания.
## Краткое описание алгоритмов формирования дерева (2 алгоритма)
## Что улучшить? (Бэклог)
Отображение одиночной цифры `Ноль` в выводе чисел дерева на форме 
## Краткое описание модулей и методов *(оформляется)*
## Описание пользовательского интерфейса *(оформляется)*
## Примеры использования *(оформляется)*
## Архив всех выгрузок базы данных, сделанных во время работы над заданием (21 файл в архиве)
